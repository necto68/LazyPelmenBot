{"version":3,"sources":["../index.js"],"names":["bot","polling","on","msg","chatId","chat","id","sendMessageWithReply","message","sendMessage","reply_to_message_id","message_id","new_chat_members","forEach","member","restrictChatMember","can_send_messages","left_chat_member","deleteMessage","text","includes","sendSticker","sendLocation","emojify"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AAOA;;;;AAKA,IAAMA,MAAM,sDAA0B,EAACC,SAAS,IAAV,EAA1B,CAAZ;;AAGAD,IAAIE,EAAJ,CAAO,SAAP,EAAkB,UAACC,GAAD,EAAS;AACvB,QAAMC,SAASD,IAAIE,IAAJ,CAASC,EAAxB;AACA,QAAMC,uBAAuB,SAAvBA,oBAAuB,CAACC,OAAD,EAAa;AACtCR,YAAIS,WAAJ,CAAgBL,MAAhB,EAAwBI,OAAxB,EAAiC;AAC7BE,iCAAqBP,IAAIQ;AADI,SAAjC;AAGH,KAJD;;AAMA,QAAIR,IAAIS,gBAAR,EAA0B;AACtBT,YAAIS,gBAAJ,CAAqBC,OAArB,CAA6B,UAACC,MAAD,EAAY;AACrCd,gBAAIe,kBAAJ,CAAuBX,MAAvB,EAA+BU,OAAOR,EAAtC,EAA0C;AACtCU,mCAAmB;AADmB,aAA1C;AAGH,SAJD;AAKH;;AAED,QAAIb,IAAIc,gBAAJ,IAAwBd,IAAIS,gBAAhC,EAAkD;AAC9CZ,YAAIkB,aAAJ,CAAkBd,MAAlB,EAA0BD,IAAIQ,UAA9B;AACH;;AAED,QAAI,CAACR,IAAIgB,IAAL,IAAahB,IAAIgB,IAAJ,KAAa,QAA9B,EAAwC;;AAExC,QAAMX,UAAU,yBAAcL,IAAIgB,IAAlB,CAAhB;;AAEA,QAAI,kCAAuBC,QAAvB,CAAgCZ,OAAhC,CAAJ,EAA8C;AAC1CR,YAAIqB,WAAJ,CAAgBjB,MAAhB,8BAAyC;AACrCM,iCAAqBP,IAAIQ;AADY,SAAzC;AAGH,KAJD,MAIO,IAAIH,YAAY,UAAhB,EAA4B;AAC/BD;AACH,KAFM,MAEA,IAAIC,YAAY,YAAhB,EAA8B;AACjCR,YAAIsB,YAAJ,CAAiBlB,MAAjB,EAAyB,SAAzB,EAAoC,SAApC;AACAJ,YAAIS,WAAJ,CAAgBL,MAAhB,EAAwB,4BAAxB;AACH,KAHM,MAGA,IAAII,YAAY,SAAhB,EAA2B;AAC9BD,6BAAqB,qEAArB;AACH,KAFM,MAEA,IAAIC,YAAY,SAAhB,EAA2B;AAC9BD,6BAAqB,oBAAMgB,OAAN,CAAc,wBAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,WAAhB,EAA6B;AAChCD,6BAAqB,oBAAMgB,OAAN,CAAc,sBAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,MAAhB,EAAwB;AAC3BD,6BAAqB,oBAAMgB,OAAN,CAAc,4BAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,QAAhB,EAA0B;AAC7BD,6BAAqB,oBAAMgB,OAAN,CAAc,kDAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,SAAhB,EAA2B;AAC9BD,6BAAqB,oBAAMgB,OAAN,CAAc,gBAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,OAAhB,EAAyB;AAC5BD,6BAAqB,oBAAMgB,OAAN,CAAc,6BAAd,CAArB;AACH,KAFM,MAEA,IAAIf,YAAY,QAAhB,EAA0B;AAC7BD,6BAAqB,0EAArB;AACH,KAFM,MAEA;AACHP,YAAIqB,WAAJ,CAAgBjB,MAAhB,EAAwB,sDAAxB,EAA0D;AACtDM,iCAAqBP,IAAIQ;AAD6B,SAA1D;AAGH;AACJ,CAtDD","file":"index.js","sourcesContent":["import TelegramBot from 'node-telegram-bot-api';\nimport emoji from 'node-emoji';\nimport {\n    botToken,\n    sevenTroublesOneAnswer,\n    pelmenStickerId,\n    defaultStickers,\n    lambChatUrl,\n} from \"./constants\";\nimport {\n    normalizeCode,\n    randomArrayItem,\n} from \"./util\";\n\nconst bot = new TelegramBot(botToken, {polling: true});\n\n\nbot.on('message', (msg) => {\n    const chatId = msg.chat.id;\n    const sendMessageWithReply = (message) => {\n        bot.sendMessage(chatId, message, {\n            reply_to_message_id: msg.message_id\n        })\n    };\n\n    if (msg.new_chat_members) {\n        msg.new_chat_members.forEach((member) => {\n            bot.restrictChatMember(chatId, member.id, {\n                can_send_messages: false\n            })\n        });\n    }\n\n    if (msg.left_chat_member || msg.new_chat_members) {\n        bot.deleteMessage(chatId, msg.message_id);\n    }\n\n    if (!msg.text || msg.text === '/start') return;\n\n    const message = normalizeCode(msg.text);\n\n    if (sevenTroublesOneAnswer.includes(message)) {\n        bot.sendSticker(chatId, pelmenStickerId, {\n            reply_to_message_id: msg.message_id\n        });\n    } else if (message === 'логика62') {\n        sendMessageWithReply(lambChatUrl);\n    } else if (message === 'салфетка34') {\n        bot.sendLocation(chatId, 48.480731, 34.956173);\n        bot.sendMessage(chatId, 'Код доезда на левом входе.');\n    } else if (message === 'клуб421') {\n        sendMessageWithReply('Играет только левый вход.\\n6 черных маркеров.\\nФормат ответа: слово')\n    } else if (message === 'стрела1') {\n        sendMessageWithReply(emoji.emojify(':snake::turtle::snake:'));\n    } else if (message === 'кастрюля2') {\n        sendMessageWithReply(emoji.emojify(':strawberry::banana:'));\n    } else if (message === 'лес3') {\n        sendMessageWithReply(emoji.emojify(':tomato::eggplant::tomato:'));\n    } else if (message === 'комок4') {\n        sendMessageWithReply(emoji.emojify(':blue_car::bullettrain_side::blue_car::blue_car:'));\n    } else if (message === 'кирпич5') {\n        sendMessageWithReply(emoji.emojify(':8ball::8ball:'));\n    } else if (message === 'корм6') {\n        sendMessageWithReply(emoji.emojify(':hotdog::hamburger::hotdog:'));\n    } else if (message === 'карлик') {\n        sendMessageWithReply('Воу воу, мне лень принимать этот ответ.\\nВбивайте его в основную систему');\n    } else {\n        bot.sendSticker(chatId, randomArrayItem(defaultStickers), {\n            reply_to_message_id: msg.message_id\n        });\n    }\n});"]}